nspace system.io
{
	str16 mut tempmessage;
	#!(unsafe)!
	fn print = str16 msg -> null {
		tempmessage = msg;
		// inline assembly
		// ret is not required
		// TODO: call setlocale() somewhere else
		_asm() {
.data
m0:
	.ascii "\0"
fmtstr:
	.ascii "%ls\0"
.text
	leaq	m0, %rdx
	movl	$0, %ecx
	call	setlocale
	
	movq	system.io.tempmessage, %rdx
	leaq	fmtstr, %rcx
	call	printf
		}
	};
}

